<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Generador de Prompt — Garabato → Realismo</title>
<link rel="icon" href="data:image/x-icon;base64,AAABAAEAICAAAAEAIACoEAAAFgAAACgAAAAgAAAAQAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A8fHxAP///wD///8A////AP///wD///8A////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AP///wD///8A////AP///wD///8A////AP///wD19fUAx8fHAMPDw4DExMQA4uLiAP///wD///8A////AP///wD///8A////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AP///wD///8A////AP///wD///8A9/f3AMTExADk5OQA7u7uAOTk5ADPz88A7e3tAP///wD///8A////AP///wD///8A////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AP///wD///8A////AP///wDw8PAAysrKAP///wD///8A////AP///wD///8A////AP///wDk5OQA////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDq6uoAzs7OAP///wD///8A////AP///wD///8A////AP///wDj4+MA////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDo6OgA0dHRAP///wD///8A////AP///wD///8A////AP///wDh4eEA////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDn5+cA1dXVAP///wD///8A////AP///wD///8A////AP///wDg4OAA////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDm5uYA19fXAP///wD///8A////AP///wD///8A////AP///wDf398A////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDl5eUA2traAP///wD///8A////AP///wD///8A////AP///wDe3t4A////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDk5OQA3d3dAP///wD///8A////AP///wD///8A////AP///wDd3d0A////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDj4+MA4ODgAP///wD///8A////AP///wD///8A////AP///wDc3NwA////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDi4uIA4+PjAP///wD///8A////AP///wD///8A////AP///wDb29sA////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDh4eEA5eXlAP///wD///8A////AP///wD///8A////AP///wDa2toA////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDg4OAA6OjoAP///wD///8A////AP///wD///8A////AP///wDZ2dkA////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDf398A7OzsAP///wD///8A////AP///wD///8A////AP///wDY2NgA////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDe3t4A7u7uAP///wD///8A////AP///wD///8A////AP///wDX19cA////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDd3d0A8PDwAP///wD///8A////AP///wD///8A////AP///wDW1tYA////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDc3NwA8vLyAP///wD///8A////AP///wD///8A////AP///wDV1dUA////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDb29sA9PT0AP///wD///8A////AP///wD///8A////AP///wDU1NQA////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDa2toA9vb2AP///wD///8A////AP///wD///8A////AP///wDT09MA////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDZ2dkA+Pj4AP///wD///8A////AP///wD///8A////AP///wDS0tIA////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDY2NgA+vr6AP///wD///8A////AP///wD///8A////AP///wDR0dEA////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDX19cA/Pz8AP///wD///8A////AP///wD///8A////AP///wDQ0NAA////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDW1tYA////AP///wD///8A////AP///wD///8A////AP///wDPz88A////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDV1dUA////AP///wD///8A////AP///wD///8A////AP///wDOzs4A////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDU1NQA////AP///wD///8A////AP///wD///8A////AP///wDNzc0A////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDT09MA////AP///wD///8A////AP///wD///8A////AP///wDMzMwA////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDS0tIA////AP///wD///8A////AP///wD///8A////AP///wDLy8sA////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDR0dEA////AP///wD///8A////AP///wD///8A////AP///wDKysr/AAAAAP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///8A////AP///wDQ0NAA////AP///wD///8A////AP///wD///8A////AP///wDk5OQA////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/>
<style>
  :root{
    color-scheme: light dark;
    --bg:#f6f7fb;--card:#ffffff;--ink:#0f172a;--muted:#475569;--brand:#0ea5e9;--brand-700:#0284c7;--ok:#10b981;--ring:rgba(14,165,233,.25);
    --chip:#eef2f7;--chip-ink:#334155;--chip-active:#0ea5e9;--chip-active-ink:#ffffff;
    --stroke:#e2e8f0;--shadow:0 6px 24px rgba(2,8,23,.06);
  }
  :root[data-theme="dark"]{
    --bg:#0b1020;--card:#0f172a;--ink:#e6edf3;--muted:#93a4bc;--brand:#38bdf8;--brand-700:#0ea5e9;--ok:#22c55e;
    --chip:#0b1224;--chip-ink:#c7d2fe;--chip-active:#0ea5e9;--chip-active-ink:#ffffff;
    --stroke:#1e293b;--shadow:0 20px 60px rgba(0,0,0,.45);
  }
  @media (prefers-color-scheme: dark){
    :root:not([data-theme="light"]){
      --bg:#0b1020;--card:#0f172a;--ink:#e6edf3;--muted:#93a4bc;--brand:#38bdf8;--brand-700:#0ea5e9;--ok:#22c55e;
      --chip:#0b1224;--chip-ink:#c7d2fe;--chip-active:#0ea5e9;--chip-active-ink:#ffffff;
      --stroke:#1e293b;--shadow:0 20px 60px rgba(0,0,0,.45);
    }
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;color:var(--ink)}
  .topbar{display:flex;justify-content:space-between;align-items:center;gap:16px;padding:16px 20px;border-bottom:1px solid var(--stroke);backdrop-filter:saturate(1.2) blur(6px)}
  .brand{display:flex;gap:12px;align-items:center}
  .logo{width:36px;height:36px;border-radius:9px;background:linear-gradient(135deg,var(--brand),#7dd3fc)}
  .titles h1{margin:0;font-size:20px}
  .lead{margin:2px 0 0;color:var(--muted);font-size:13px}
  .controls{display:flex;align-items:center;gap:8px}
  .theme-label{font-size:12px;color:var(--muted)}
  .layout{display:grid;grid-template-columns:1fr 320px;gap:20px;max-width:1200px;margin:0 auto;padding:20px}
  @media (max-width: 1024px){.layout{grid-template-columns:1fr} .sidebar{order:-1}}
  .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
  .card{grid-column:span 12;background:var(--card);border-radius:16px;padding:18px;box-shadow:var(--shadow);border:1px solid var(--stroke)}
  @media(min-width:900px){.card.span6{grid-column:span 6}}
  .head{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
  .title{font-weight:700;font-size:16px}
  .hint{color:var(--muted);font-size:13px}
  .badge{display:inline-block;border:1px dashed var(--stroke);border-radius:8px;padding:4px 8px;color:var(--muted);font-size:12px}
  .pill{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;background:#eef2ff;color:#3730a3;font-size:12px;margin-left:6px}
  .chips{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
  .chip{user-select:none;cursor:pointer;padding:9px 12px;border-radius:999px;background:var(--chip);color:var(--chip-ink);border:1px solid transparent;transition:.15s}
  .chip:hover{transform:translateY(-1px)}
  .chip.active{background:var(--chip-active);color:var(--chip-active-ink);box-shadow:0 0 0 4px var(--ring)}
  .chip.outline{background:transparent;border-color:var(--stroke)}
  .twocol{display:grid;grid-template-columns:1fr;gap:12px}
  @media(min-width:700px){.twocol{grid-template-columns:1fr 1fr}}
  .input, select{width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--stroke);background:var(--card);color:var(--ink)}
  .preview{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono",monospace;background:#0b1020;color:#e6edf3;border-radius:16px;padding:16px;min-height:120px;white-space:pre-wrap;outline:1px solid #1e293b}
  .actions{position:sticky;bottom:0;background:linear-gradient(180deg,rgba(246,247,251,0),rgba(246,247,251,.9) 20%,var(--bg));padding:14px 0 18px;margin-top:18px;border-top:1px solid var(--stroke)}
  .btn{appearance:none;border:0;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer}
  .btn.primary{background:var(--brand);color:#fff}
  .btn.primary:hover{filter:brightness(.95)}
  .btn.secondary{background:#cbd5e1;color:#0b1224}
  .btn.ghost{background:transparent;border:1px solid var(--stroke)}
  .btn.tiny{padding:6px 10px;font-size:12px}
  .sidebar{position:sticky;top:16px;height:calc(100dvh - 32px);background:var(--card);border:1px solid var(--stroke);border-radius:16px;box-shadow:var(--shadow);padding:14px}
  .sidehead{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
  .history-list{display:flex;flex-direction:column;gap:10px;max-height:calc(100% - 40px);overflow:auto;padding-right:4px}
  .history-item{border:1px solid var(--stroke);border-radius:12px;padding:10px;background:transparent}
  .history-actions{display:flex;gap:8px;margin-top:8px}
  .muted{color:var(--muted);font-size:13px}
  .backdrop{position:fixed;inset:0;background:rgba(2,8,23,.55);opacity:0;pointer-events:none;transition:.2s}
  .backdrop.show{opacity:1;pointer-events:auto}
  .modal{position:fixed;inset:0;display:grid;place-items:center;padding:20px;opacity:0;transform:translateY(10px) scale(.98);transition:.2s}
  .modal.show{opacity:1;transform:translateY(0) scale(1)}
  .sheet{max-width:920px;width:100%;background:var(--card);border-radius:20px;box-shadow:0 30px 80px rgba(2,8,23,.35);padding:18px;border:1px solid var(--stroke)}
  .sheet h3{margin:0 0 6px}
  .row-end{display:flex;gap:8px;justify-content:flex-end;margin-top:10px}
  .divider{height:1px;background:var(--stroke);margin:12px 0}
</style>
</head>
<body>
<header class="topbar">
  <div class="brand">
    <div class="logo"></div>
    <div class="titles">
      <h1>Generador de Prompt — Garabato → Realismo</h1>
      <p class="lead">Selecciona variables. Si eliges “No seleccionar nada”, esa sección no se añade al prompt.</p>
    </div>
  </div>
  <div class="controls">
    <label for="themeSelect" class="theme-label">Tema</label>
    <select id="themeSelect" class="input">
      <option value="auto">Auto (sistema)</option>
      <option value="light">Claro</option>
      <option value="dark">Oscuro</option>
    </select>
  </div>
</header>

<main class="layout">
  <section class="content">
    <div class="grid">
      <div class="card span6">
        <div class="head">
          <div class="title">Tipo de resultado</div>
          <span class="badge">Salida</span>
        </div>
        <div class="hint">Formato general del render o foto final.</div>
        <div class="chips" data-group="resultado" data-type="single">
          <div class="chip outline active" data-value="">No seleccionar nada</div>
          <div class="chip" data-value="fotorrealista">Fotorrealista</div>
          <div class="chip" data-value="render 3D realista">Render 3D realista</div>
          <div class="chip" data-value="ilustración hiperrealista">Ilustración hiperrealista</div>
          <div class="chip" data-value="stop-motion digital">Stop-motion digital</div>
        </div>
      </div>

      <div class="card span6">
        <div class="head">
          <div class="title">Nivel de realismo</div>
          <span class="badge">Fidelidad</span>
        </div>
        <div class="hint">Cuán “real” debe sentirse el resultado.</div>
        <div class="chips" data-group="realismo" data-type="single">
          <div class="chip outline active" data-value="">No seleccionar nada</div>
          <div class="chip" data-value="hiperrealista">Hiperrealista</div>
          <div class="chip" data-value="ultrarealista">Ultrarealista</div>
          <div class="chip" data-value="cuasi-fotográfico">Cuasi-fotográfico</div>
        </div>
      </div>

      <div class="card span6">
        <div class="head">
          <div class="title">Texturas principales (multi)</div>
          <span class="badge">Material</span>
        </div>
        <div class="hint">Material dominante del objeto/personaje.</div>
        <div class="chips" data-group="texturas" data-type="multi">
          <div class="chip outline active" data-value="">No seleccionar nada</div>
          <div class="chip" data-value="piel">Piel</div>
          <div class="chip" data-value="pelaje">Pelaje</div>
          <div class="chip" data-value="metal">Metal</div>
          <div class="chip" data-value="madera">Madera</div>
          <div class="chip" data-value="piedra">Piedra</div>
          <div class="chip" data-value="cerámica">Cerámica</div>
          <div class="chip" data-value="plástico">Plástico</div>
          <div class="chip" data-value="vidrio">Vidrio</div>
          <div class="chip" data-value="textil">Textil</div>
          <div class="chip" data-value="goma">Goma</div>
        </div>
      </div>

      <div class="card span6">
        <div class="head">
          <div class="title">Materiales secundarios (multi)</div>
          <span class="badge">Material</span>
        </div>
        <div class="hint">Acentos o piezas parciales.</div>
        <div class="chips" data-group="materiales" data-type="multi">
          <div class="chip outline active" data-value="">No seleccionar nada</div>
          <div class="chip" data-value="oxidación leve">Oxidación leve</div>
          <div class="chip" data-value="desgaste natural">Desgaste natural</div>
          <div class="chip" data-value="microarañazos">Microarañazos</div>
          <div class="chip" data-value="acabado mate">Acabado mate</div>
          <div class="chip" data-value="acabado satinado">Acabado satinado</div>
          <div class="chip" data-value="acabado brillante">Acabado brillante</div>
        </div>
      </div>

      <div class="card span6">
        <div class="head">
          <div class="title">Tipo de iluminación</div>
          <span class="badge">Luz</span>
        </div>
        <div class="hint">Carácter de la luz principal.</div>
        <div class="chips" data-group="iluminacion" data-type="single">
          <div class="chip outline active" data-value="">No seleccionar nada</div>
          <div class="chip" data-value="natural">Natural</div>
          <div class="chip" data-value="de estudio">De estudio</div>
          <div class="chip" data-value="dramática">Dramática</div>
          <div class="chip" data-value="atardecer">Atardecer</div>
          <div class="chip" data-value="nocturna suave">Nocturna suave</div>
        </div>
      </div>

      <div class="card span6">
        <div class="head">
          <div class="title">Esquema de iluminación</div>
          <span class="badge">Luz</span>
        </div>
        <div class="hint">Configuración fotográfica.</div>
        <div class="chips" data-group="esquema" data-type="single">
          <div class="chip outline active" data-value="">No seleccionar nada</div>
          <div class="chip" data-value="Rembrandt">Rembrandt</div>
          <div class="chip" data-value="luz lateral dura">Luz lateral dura</div>
          <div class="chip" data-value="luz suave frontal">Luz suave frontal</div>
          <div class="chip" data-value="contra luz">Contra luz</div>
          <div class="chip" data-value="tres puntos">Tres puntos</div>
        </div>
      </div>

      <div class="card span6">
        <div class="head">
          <div class="title">Longitud focal</div>
          <span class="badge">Cámara</span>
        </div>
        <div class="hint">Afecta perspectiva y compresión.</div>
        <div class="chips" data-group="focal" data-type="single">
          <div class="chip outline active" data-value="">No seleccionar nada</div>
          <div class="chip" data-value="35mm">35mm</div>
          <div class="chip" data-value="50mm">50mm</div>
          <div class="chip" data-value="85mm">85mm</div>
          <div class="chip" data-value="105mm macro">105mm macro</div>
        </div>
      </div>

      <div class="card span6">
        <div class="head">
          <div class="title">Plano / Encuadre</div>
          <span class="badge">Cámara</span>
        </div>
        <div class="hint">Cuánta porción del sujeto se ve.</div>
        <div class="chips" data-group="plano" data-type="single">
          <div class="chip outline active" data-value="">No seleccionar nada</div>
          <div class="chip" data-value="full-body view">Cuerpo entero</div>
          <div class="chip" data-value="plano medio">Plano medio</div>
          <div class="chip" data-value="primer plano">Primer plano</div>
        </div>
      </div>

      <div class="card span6">
        <div class="head">
          <div class="title">Ángulo de cámara</div>
          <span class="badge">Cámara</span>
        </div>
        <div class="hint">Punto de vista dominante.</div>
        <div class="chips" data-group="angulo" data-type="single">
          <div class="chip outline active" data-value="">No seleccionar nada</div>
          <div class="chip" data-value="a nivel de ojos">A nivel de ojos</div>
          <div class="chip" data-value="picado suave">Picado suave</div>
          <div class="chip" data-value="contrapicado suave">Contrapicado suave</div>
          <div class="chip" data-value="tres cuartos">Tres cuartos</div>
        </div>
      </div>

      <div class="card span6">
        <div class="head">
          <div class="title">Composición</div>
          <span class="badge">Arte</span>
        </div>
        <div class="hint">Reglas y orden visual.</div>
        <div class="chips" data-group="composicion" data-type="single">
          <div class="chip outline active" data-value="">No seleccionar nada</div>
          <div class="chip" data-value="regla de los tercios">Regla de los tercios</div>
          <div class="chip" data-value="centrada">Centrada</div>
          <div class="chip" data-value="simetría">Simetría</div>
          <div class="chip" data-value="líneas guía">Líneas guía</div>
        </div>
      </div>

      <div class="card span6">
        <div class="head">
          <div class="title">Entorno</div>
          <span class="badge">Escena</span>
        </div>
        <div class="hint">Lugar donde “existe” el sujeto.</div>
        <div class="chips" data-group="entorno" data-type="single">
          <div class="chip outline active" data-value="">No seleccionar nada</div>
          <div class="chip" data-value="exterior natural">Exterior natural</div>
          <div class="chip" data-value="habitación">Habitación</div>
          <div class="chip" data-value="fondo neutro">Fondo neutro</div>
          <div class="chip" data-value="paisaje urbano">Paisaje urbano</div>
          <div class="chip" data-value="set de estudio">Set de estudio</div>
        </div>
      </div>

      <div class="card span6">
        <div class="head">
          <div class="title">Profundidad de campo</div>
          <span class="badge">Óptica</span>
        </div>
        <div class="hint">Relación nitidez / desenfoque.</div>
        <div class="chips" data-group="dof" data-type="single">
          <div class="chip outline active" data-value="">No seleccionar nada</div>
          <div class="chip" data-value="bokeh pronunciado">Bokeh pronunciado</div>
          <div class="chip" data-value="profundidad media">Profundidad media</div>
          <div class="chip" data-value="todo en foco">Todo en foco</div>
        </div>
      </div>

      <div class="card span6">
        <div class="head">
          <div class="title">Técnicas de render (multi)</div>
          <span class="badge">Render</span>
        </div>
        <div class="hint">Motores y fenómenos físicos simulados.</div>
        <div class="chips" data-group="tecnicas" data-type="multi">
          <div class="chip outline active" data-value="">No seleccionar nada</div>
          <div class="chip" data-value="PBR">PBR</div>
          <div class="chip" data-value="iluminación global">Iluminación global</div>
          <div class="chip" data-value="subsurface scattering">Subsurface scattering</div>
          <div class="chip" data-value="ray tracing">Ray tracing</div>
          <div class="chip" data-value="volumetric lighting">Volumetric lighting</div>
          <div class="chip" data-value="occlusion ambient">Occlusion ambient</div>
        </div>
      </div>

      <div class="card span6">
        <div class="head">
          <div class="title">Post-procesado (multi)</div>
          <span class="badge">Post</span>
        </div>
        <div class="hint">Ajustes finales.</div>
        <div class="chips" data-group="post" data-type="multi">
          <div class="chip outline active" data-value="">No seleccionar nada</div>
          <div class="chip" data-value="color grading cinematográfico">Color grading cinematográfico</div>
          <div class="chip" data-value="nitidez controlada">Nitidez controlada</div>
          <div class="chip" data-value="grano sutil">Grano sutil</div>
          <div class="chip" data-value="bloom moderado">Bloom moderado</div>
          <div class="chip" data-value="viñeteo suave">Viñeteo suave</div>
        </div>
      </div>

      <div class="card span6">
        <div class="head">
          <div class="title">Estilo visual</div>
          <span class="badge">Arte</span>
        </div>
        <div class="hint">Dirección artística general.</div>
        <div class="chips" data-group="estilo" data-type="single">
          <div class="chip outline active" data-value="">No seleccionar nada</div>
          <div class="chip" data-value="cinematográfico">Cinematográfico</div>
          <div class="chip" data-value="publicitario">Publicitario</div>
          <div class="chip" data-value="retrato editorial">Retrato editorial</div>
          <div class="chip" data-value="documental">Documental</div>
        </div>
      </div>

      <div class="card span6">
        <div class="head">
          <div class="title">Tipo de representación final</div>
          <span class="badge">Salida</span>
        </div>
        <div class="hint">Cómo debe “parecer” el resultado.</div>
        <div class="chips" data-group="representacion" data-type="single">
          <div class="chip outline active" data-value="">No seleccionar nada</div>
          <div class="chip" data-value="fotografía">Fotografía</div>
          <div class="chip" data-value="render CGI">Render CGI</div>
          <div class="chip" data-value="frame de película">Frame de película</div>
        </div>
      </div>

      <div class="card span6">
        <div class="head">
          <div class="title">Relación de aspecto</div>
          <span class="badge">Parámetro</span>
        </div>
        <div class="twocol">
          <input id="ar" class="input" placeholder="Ej.: 3:4 o 16:9">
          <select id="arPreset" class="input">
            <option value="">No seleccionar nada</option>
            <option>1:1</option><option>3:4</option><option>4:3</option><option>16:9</option><option>9:16</option>
          </select>
        </div>
        <div class="note">Si eliges “No seleccionar nada”, no se añade <code>--ar</code> al prompt.</div>
      </div>

      <div class="card span6">
        <div class="head">
          <div class="title">Versión / Calidad</div>
          <span class="badge">Parámetro</span>
        </div>
        <div class="twocol">
          <input id="versionModelo" class="input" placeholder="Versión del modelo (p.ej. 6)">
          <input id="calidad" class="input" placeholder="Calidad (p.ej. 2)">
        </div>
        <div class="note">Campos vacíos ⇒ no se añaden <code>--v</code> ni <code>--q</code>.</div>
      </div>

      <div class="card" id="live">
        <div class="head">
          <div class="title">Vista previa rápida</div>
          <span class="pill">Se actualiza al confirmar</span>
        </div>
        <div class="preview" id="preview">El prompt aparecerá aquí tras confirmar.</div>
      </div>
    </div>

    <div class="actions">
      <button class="btn ghost" id="resetBtn">Reiniciar</button>
      <button class="btn secondary" id="borradorBtn">Generar borrador</button>
      <button class="btn primary" id="confirmBtn">Confirmar y ver prompt</button>
    </div>
  </section>

  <aside class="sidebar" id="historyPanel">
    <div class="sidehead">
      <h3>Historial</h3>
      <button class="btn tiny clear" id="clearHistoryBtn">Vaciar</button>
    </div>
    <div class="history-list" id="historyList">
      <div class="muted">No hay prompts todavía.</div>
    </div>
  </aside>
</main>

<div class="backdrop" id="backdrop"></div>
<div class="modal" id="modal">
  <div class="sheet">
    <h3>Prompt generado</h3>
    <div class="divider"></div>
    <div class="preview" id="promptFinal"></div>
    <div class="row-end">
      <button class="btn secondary" id="copyBtn">Copiar</button>
      <button class="btn secondary" id="shareBtn">Compartir</button>
      <button class="btn secondary" id="exportBtn">Exportar .txt</button>
      <button class="btn primary" id="closeBtn">Cerrar</button>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function(){
  const themeSelect = document.getElementById('themeSelect');
  const root = document.documentElement;
  function applyTheme(value){
    if(value === 'auto'){
      root.removeAttribute('data-theme');
      localStorage.setItem('pg_theme','auto');
    }else{
      root.setAttribute('data-theme', value);
      localStorage.setItem('pg_theme', value);
    }
  }
  themeSelect.addEventListener('change', ()=> applyTheme(themeSelect.value));
  (function initTheme(){
    const saved = localStorage.getItem('pg_theme') || 'auto';
    themeSelect.value = saved;
    applyTheme(saved);
  })();

  const groups = {};
  document.querySelectorAll('.chips').forEach(group=>{
    const groupName = group.dataset.group;
    const type = group.dataset.type;
    groups[groupName] = {el:group,type,values:[]};
    group.addEventListener('click', e=>{
      const chip = e.target.closest('.chip');
      if(!chip) return;
      const value = chip.dataset.value;
      if(type==='single'){
        group.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
        chip.classList.add('active');
      }else{
        if(value===""){
          group.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
          chip.classList.add('active');
        }else{
          const none = group.querySelector('.chip[data-value=""]');
          if(none) none.classList.remove('active');
          chip.classList.toggle('active');
          const anyActive = group.querySelector('.chip.active');
          if(!anyActive && none) none.classList.add('active');
        }
      }
    });
  });

  const arInput = document.getElementById('ar');
  const arPreset = document.getElementById('arPreset');
  arPreset.addEventListener('change',()=>{
    arInput.value = arPreset.value === "" ? "" : arPreset.value;
  });

  function collectSelections(){
    const getSingle = (g)=> {
      const active = groups[g].el.querySelector('.chip.active');
      const v = active ? active.dataset.value : "";
      return v || "";
    };
    const getMulti = (g)=>{
      const vs = [...groups[g].el.querySelectorAll('.chip.active')]
        .map(c=>c.dataset.value)
        .filter(v=>v!=="");
      return vs;
    };
    return {
      resultado: getSingle('resultado'),
      realismo: getSingle('realismo'),
      texturas: getMulti('texturas'),
      materiales: getMulti('materiales'),
      iluminacion: getSingle('iluminacion'),
      esquema: getSingle('esquema'),
      focal: getSingle('focal'),
      plano: getSingle('plano'),
      angulo: getSingle('angulo'),
      composicion: getSingle('composicion'),
      entorno: getSingle('entorno'),
      dof: getSingle('dof'),
      tecnicas: getMulti('tecnicas'),
      post: getMulti('post'),
      estilo: getSingle('estilo'),
      representacion: getSingle('representacion'),
      ar: (arInput.value||"").trim(),
      version: (document.getElementById('versionModelo').value||"").trim(),
      calidad: (document.getElementById('calidad').value||"").trim()
    };
  }

  function lista(arr){
    if(arr.length===1) return arr[0];
    const last = arr[arr.length-1];
    return arr.slice(0,-1).join(", ") + " y " + last;
  }
  function articulo(txt){ return "un"; }

  function buildPrompt(sel){
    const base1 = `Toma este dibujo creado por mi hijo y transfórmalo en ${sel.resultado ? "un " + sel.resultado : "una imagen fotorrealista o un render 3D realista"}. No sé qué se supone que es: podría ser una criatura, un objeto o algo completamente salido de su imaginación.
Mantén la forma original, las proporciones, la longitud de las líneas y todas las imperfecciones exactamente como están en el dibujo, incluyendo ojos torcidos, líneas desiguales o marcas extrañas. No corrijas, suavices ni cambies ningún detalle de su diseño.`;

    const frases = [];
    if(sel.realismo){ frases.push(`Trátalo con un nivel ${sel.realismo}.`); }
    if(sel.texturas.length){ frases.push(`Aplícale texturas ${lista(sel.texturas)}.`); }
    if(sel.materiales.length){ frases.push(`Detalles de material: ${lista(sel.materiales)}.`); }
    if(sel.iluminacion){
      frases.push(`Iluminación ${sel.iluminacion}${sel.esquema ? " con esquema " + sel.esquema : ""}.`);
    } else if(sel.esquema){
      frases.push(`Esquema de iluminación ${sel.esquema}.`);
    }
    const camBits = [];
    if(sel.focal){ camBits.push(`lente ${sel.focal}`); }
    if(sel.angulo){ camBits.push(sel.angulo); }
    if(sel.plano){ camBits.push(sel.plano); }
    if(camBits.length){ frases.push(`Cámara / encuadre: ${camBits.join(", ")}.`); }
    if(sel.composicion){ frases.push(`Composición ${sel.composicion}.`); }
    if(sel.entorno){ frases.push(`Ubícalo en ${articulo(sel.entorno)} ${sel.entorno}, coherente con el carácter del dibujo.`); }
    if(sel.dof){ frases.push(`Profundidad de campo ${sel.dof}.`); }
    if(sel.tecnicas.length){ frases.push(`Técnicas de render: ${lista(sel.tecnicas)}.`); }
    if(sel.post.length){ frases.push(`Post-procesado: ${lista(sel.post)}.`); }
    if(sel.representacion){ frases.push(`Debe parecer una ${sel.representacion}.`); }
    if(sel.estilo){ frases.push(`Estilo visual ${sel.estilo}.`); }

    const base2 = `Haz que parezca que esta cosa existe en el mundo real, con materiales y respuesta de luz creíbles. Puedes añadir sombras coherentes, profundidad de campo y un entorno que encaje con la vibra del dibujo, pero sin alterar la forma ni los detalles originales creados. Nada de texturas de lápiz o estilos dibujados a mano: debe parecer una fotografía o un render CGI profesional, fiel a su imaginación.`;

    const flags = [];
    if(sel.ar){ flags.push(\`--ar \${sel.ar}\`); }
    if(sel.version){ flags.push(\`--v \${sel.version}\`); }
    if(sel.calidad){ flags.push(\`--q \${sel.calidad}\`); }

    const calidadExtra = (!sel.tecnicas.length)
      ? \`Renderízalo con calidad ultra alta (8K), materiales físicamente correctos (PBR), iluminación global, subsurface scattering cuando proceda, ray tracing en reflejos y volumetric lighting si aporta realismo.\`
      : ``;

    const cuerpo = frases.length ? "\\n\\n" + frases.join(" ") : "";
    const tail = (calidadExtra ? "\\n\\n" + calidadExtra : "") + (flags.length ? `\n${flags.join(" ")}` : "");
    return base1 + "\\n\\n" + base2 + cuerpo + tail;
  }

  const previewEl = document.getElementById('preview');
  const modal = document.getElementById('modal');
  const backdrop = document.getElementById('backdrop');
  const promptFinal = document.getElementById('promptFinal');

  function openModal(){ backdrop.classList.add('show'); modal.classList.add('show'); }
  function closeModal(){ backdrop.classList.remove('show'); modal.classList.remove('show'); }

  const historyList = document.getElementById('historyList');
  const clearHistoryBtn = document.getElementById('clearHistoryBtn');

  function loadHistory(){
    const items = JSON.parse(localStorage.getItem('pg_history')||'[]');
    historyList.innerHTML = "";
    if(!items.length){
      const div = document.createElement('div');
      div.className = 'muted';
      div.textContent = 'No hay prompts todavía.';
      historyList.appendChild(div);
      return;
    }
    items.forEach((text, idx)=>{
      const wrap = document.createElement('div');
      wrap.className = 'history-item';
      const pre = document.createElement('pre');
      pre.textContent = text;
      pre.style.whiteSpace = 'pre-wrap';
      pre.style.fontFamily = 'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace';
      const row = document.createElement('div');
      row.className = 'history-actions';
      const btnCopy = document.createElement('button');
      btnCopy.className = 'btn ghost tiny';
      btnCopy.textContent = 'Copiar';
      btnCopy.addEventListener('click', ()=> navigator.clipboard.writeText(text));
      const btnExport = document.createElement('button');
      btnExport.className = 'btn ghost tiny';
      btnExport.textContent = 'Exportar .txt';
      btnExport.addEventListener('click', ()=> exportTxt(text, \`prompt-\${idx+1}.txt\`));
      row.appendChild(btnCopy);
      row.appendChild(btnExport);
      wrap.appendChild(pre);
      wrap.appendChild(row);
      historyList.appendChild(wrap);
    });
  }
  function addToHistory(text){
    const items = JSON.parse(localStorage.getItem('pg_history')||'[]');
    items.unshift(text);
    if(items.length > 100) items.pop();
    localStorage.setItem('pg_history', JSON.stringify(items));
    loadHistory();
  }
  clearHistoryBtn.addEventListener('click', ()=>{
    localStorage.removeItem('pg_history');
    loadHistory();
  });

  document.getElementById('confirmBtn').addEventListener('click', ()=>{
    const sel = collectSelections();
    const prompt = buildPrompt(sel);
    promptFinal.textContent = prompt;
    previewEl.textContent = prompt;
    addToHistory(prompt);
    openModal();
  });

  document.getElementById('borradorBtn').addEventListener('click', ()=>{
    const sel = collectSelections();
    const prompt = buildPrompt(sel);
    previewEl.textContent = prompt;
    window.scrollTo({top:document.body.scrollHeight,behavior:'smooth'});
  });

  document.getElementById('resetBtn').addEventListener('click', ()=>{
    document.querySelectorAll('.chips').forEach(group=>{
      group.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
      const none = group.querySelector('.chip[data-value=""]');
      if(none) none.classList.add('active');
    });
    document.getElementById('versionModelo').value="";
    document.getElementById('calidad').value="";
    document.getElementById('ar').value="";
    document.getElementById('arPreset').value="";
    previewEl.textContent = "El prompt aparecerá aquí tras confirmar.";
  });

  document.getElementById('closeBtn').addEventListener('click', closeModal);

  document.getElementById('copyBtn').addEventListener('click', async ()=>{
    const text = promptFinal.textContent;
    try{
      await navigator.clipboard.writeText(text);
      flash("Copiado al portapapeles");
    }catch(e){
      alert("No se pudo copiar automáticamente.");
    }
  });

  document.getElementById('shareBtn').addEventListener('click', async ()=>{
    const text = promptFinal.textContent;
    if(navigator.share){
      try{ await navigator.share({text}); }catch{}
    }else{
      alert("Compartir no está soportado en este navegador.");
    }
  });

  document.getElementById('exportBtn').addEventListener('click', ()=>{
    const text = promptFinal.textContent;
    exportTxt(text, \`prompt-\${new Date().toISOString().slice(0,19).replace(/[:T]/g,'-')}.txt\`);
  });

  backdrop.addEventListener('click', closeModal);

  function exportTxt(content, filename="prompt.txt"){
    const blob = new Blob([content], {type: "text/plain;charset=utf-8"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    a.remove();
    setTimeout(()=> URL.revokeObjectURL(url), 1000);
  }

  function flash(msg){
    const el = document.createElement('div');
    el.textContent = msg;
    el.style.position='fixed';
    el.style.left='50%';
    el.style.bottom='24px';
    el.style.transform='translateX(-50%)';
    el.style.background='var(--ok)';
    el.style.color='#fff';
    el.style.padding='10px 14px';
    el.style.borderRadius='12px';
    el.style.boxShadow='0 10px 30px rgba(2,8,23,.25)';
    el.style.zIndex='9999';
    document.body.appendChild(el);
    setTimeout(()=>{el.remove();},1600);
  }

  // Inicializar historial en carga
  loadHistory();
});
</script>
</body>
</html>
